---
title: 日常-2020.4.21
date: 2020-04-21 09:52:01
categories: 日常
---

# 今日清单

昨天项目在微信开发者工具上成功运行，今天准备看代码的时候发现微信开发者工具识别不了vue文件，就换了vscode，安装了Vetur插件之后搞定。

* template标签
* 简单写了一个小程序

<!--more-->

## template标签

看代码时最先看到的就是这个标签，之前没有学习过，首先要知道这个标签不是vue特有的。

根据MDN上的解释：

> **HTML内容模板（<template>）元素**是一种用于保存客户端内容机制，该内容在加载页面时不会呈现，但随后可以(原文为 may be)在运行时使用JavaScript实例化。
>
> 将模板视为一个可存储在文档中以便后续使用的内容片段。虽然解析器在加载页面时确实会处理**<template>**元素的内容，但这样做只是为了确保这些内容有效；但元素内容不会被渲染。

**content属性:通过该属性可以获取template标签中的内容 **

```html
<!--template标签默认设置了display:none-->
<template id='tem'>
        <div id="div1">我是template中的盒子1</div>
        <div id='div2'>我是template中的盒子2</div>
</template>

<script>
        let o = document.getElementById('tem')
        console.log(o.content) //#document-fragment
   	    console.log(o.content.querySelectorAll("div")) //NodeList(2) [div#div1, div#div2]
</script>
```

### vue中的template

此处部分参考与[这里](<https://blog.csdn.net/u010510187/article/details/100356624> )

* 在vue实例里面：template标签中的内容显示，在dom中不存在template标签 
* 不在vue实例里：template标签中的内容在页面中不显示，但是在dom结构存在该标签及内部结构 

```html
   <div id="app">
        <!--此处的template标签中的内容显示并且在dom中不存在template标签-->
        <template>
            <div>我是template</div>
            <div>我是template</div>
        </template>
    </div>
    
    <!--此处的template标签中的内容在页面中不显示，但是在dom结构存在该标签及内部结构-->
    <template id="tem">
        <div id="div1">我是template</div>
        <div>我是template</div>
    </template>

    <script src="./vue.min.js"></script>
    <script>
        let vm = new Vue({
            el: "#app",
        });
    </script>
```

那template到底在vue中有什么作用呢，我们知道元素可以使用`v-if`控制显示，那么多个元素呢？

### 在template元素上使用 v-if 条件渲染分组

```html
   <div id='app'>

        <template v-if="false">
            <h1>Title</h1>
            <p>Paragraph 1</p>
            <p>Paragraph 2</p>
        </template>

   </div>

    <script src="./vue.min.js"></script>
    <script>
        let vm = new Vue({
            el: "#app",
        });
    </script>
```

**注意：v-show不支持template元素**

### 使用v-for的template渲染多个元素

```html
	<div id='app'>

        <ul>
            <template v-for='item in items'>
                <li>{{ item.msg }}</li>
                <li>haha</li>
            </template>
        </ul>

    </div>

    <script src="./vue.min.js"></script>
    <script>
        let vm = new Vue({
            el: "#app",
            data:{
                items:[
                    { msg:"1" },
                    { msg:"2" },
                    { msg:"3" },
                    { msg:"4" },
                    { msg:"5" }
                ]
            }
        });
    </script>

<!--
    1
    haha
    2
    haha
    3
    haha
    4
    haha
    5
    haha
-->
```

### vue中的template属性

> 将实例中template属性值进行编译，并将编译后的dom替换掉vue实例绑定的元素，如果该vue实例绑定的元素中存在内容，这些内容会直接被覆盖。
>
> 1）如果vue实例中有template属性，会将该属性值进行编译，将编译后的虚拟dom直接替换掉vue实例绑定的元素（即el绑定的那个元素）；
> 2）template属性中的dom结构只能有一个根元素，如果有多个根元素需要使用v-if、v-else、v-else-if设置成只显示其中一个根元素；
> 3）在该属性对应的属性值中可以使用vue实例data、methods中定义的数据。

```html
	<div id='app'></div>

    <template id='tem'>
        <div>我是template中的盒子1</div>
        <div>我是template中的盒子2</div>
    </template>

    <script src="./vue.min.js"></script>
    <script>
        let vm = new Vue({
            el: "#app",
            template:'#tem'
        });
    </script>

<!--这样只会显示第一个盒子，但是如果像下面这样，就可以显示两个盒子-->
	<template id='tem'>
        <div>我是template中的盒子1
            <div>我是template中的盒子2</div>
        </div>
    </template>
```

**注意：组件模板只能有一个根元素 **

为什么呢？查了一些资料，貌似与渲染更新和diff算法有关，这个后面学习到的时候再看。

## 简单写了一个小程序

### 如何调用微信登录

登录按钮设置open-type和bindgetuserinfo属性，如下： 

```html
<button 
class='btn' 
wx:if="{{canIUse}}" 
open-type="getUserInfo" 
bindgetuserinfo="bindGetUserInfo">登录</button>
```

```js
data: {
	canIUse: wx.canIUse('button.open-type.getUserInfo')
},

onLoad: function () {
	// 查看是否授权
	wx.getSetting({
		success: function (res) {
			if (res.authSetting['scope.userInfo']) {
				// 已经授权，可以直接调用 getUserInfo 获取头像昵称
				wx.getUserInfo({
					success: function (res) {
						console.log(res.userInfo)
                      }
                  })
              }
          }
     })
},

bindGetUserInfo: function (e) {
	console.log(e.detail.userInfo)
	if (e.detail.userInfo) {
		wx.redirectTo({url:''})//跳转界面
	} else {
		//用户按了拒绝按钮
	}
}
```



