---
title: 日常-2020.4.28
date: 2020-04-28 09:52:01
categories: 日常
---

* e.mp.detail.value
* mpvue绑定微信用户
* mpvue云开发
* mpvue的created
* page not register
* 控制台输出对象，输出的是[object Object]

<!--more-->

## e.mp.detail.value

实时获取输入框的值时，原生小程序代码和mpvue是有区别的

```js
//原生
input: function(e){
	this.inputVal = e.detail.value
}

//mpvue
input: function(e){
	this.inputVal = e.mp.detail.value
}
```

## mpvue绑定微信用户

```js
<button class='btn' v-if="canIUse" open-type="getUserInfo"   @getuserinfo="bindGetUserInfo">登录</button>

	bindGetUserInfo: function (e) {
      // console.log(e.mp.detail.userInfo)
      if (e.mp.detail.userInfo) {
        wx.navigateTo({ url: '../login/main' })// 跳转到绑定学员界面
      } else {
        // 用户按了拒绝按钮
      }
    },
    created () {
        wx.getSetting({
          success: function (res) {
            if (res.authSetting['scope.userInfo']) {
              // 已经授权，可以直接调用 getUserInfo 获取头像昵称
              wx.getUserInfo({
                success: function (res) {
                  console.log(res.userInfo)
                }
              })
            }
          }
        })
      }
```

## mpvue云开发

云开发，src/main.js里加上如下：

```js
wx.cloud.init({
  traceUser: true
})
```

## mpvue的created

mpvue的created会一次性把所有页面的都执行完，不是每个页面加载的时候执行

## page not register

一开始总会出现这个情况，后来使用`npm run build`后就没有了

## 控制台输出对象，输出的是[object Object]

原因：在页面传参时我想要传一个对象，就用了`'obj='+obj`，这里的obj遇到+会调用`toString`方法转换为`[object Object]`
