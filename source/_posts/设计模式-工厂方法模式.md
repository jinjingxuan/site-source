---
title: 工厂方法模式
date: 2019-1-20 16:00:54
categories: 设计模式
---

# 工厂方法模式

工厂方法模式（Factory Method）：通过对产品类的抽象使其创建业务主要负责用于创建多类产品的实例。

# 场景再现

如何投放一批广告资源：

* java,绿色字体
* PHP，黄色字体，红色背景
* JS，粉色背景...

我们想到了昨天学习的简单工厂模式

<!--more-->

```js
//创建Java学科类
var Java = function(content){
    
}
//创建PHP学科类
var Php = function(content){
    
}
//创建JavaScript学科类
var JavaScript = function(content){
    this.content = content;
    (function(){
        var div = document.createElement('div');
        div.innerHTML = content;
        div.style.background = 'pink';
        document.getElementById('container').appendChild(div);
    })(content);
}
//学科类工厂
function JobFactory(type,content){
    switch(type){
        case 'java':
            return new Java(content);
        case 'php':
            return new Php(content);
        case 'JavaScript':
            return new JavaScript(content);
    }
}
//测试
JobFactory('JavaScript','JavaScript哪家强');
```

但是这种方法每当有新的需求时，我们不仅仅要添加类，而且还要修改工厂函数，我们这里可以使用安全的工厂方法，在这之前，我们先介绍一下安全模式类。

# 安全模式类

```js
//不安全模式
var Demo = function(){}
Demo.prototype = {
    show: function(){
        console.log('成功获取');
    }
}

var d = new Demo();
d.show();//成功获取
var d = Demo();
d.show();//错误

//在构造函数开始时先判断当前对象this指代是不是类
var Demo = function(){
    if(!(this instanceof Demo)){
        return new Demo();
    }
}
var d = Demo();
d.show();
```

# 安全的工厂方法

```js
//安全模式创建的工厂类
var Factory = function(type,content){
    if(this instanceof Factory){
        var s = new this[type](content);
        return s;
    }else{
        return new Factory(type,content);
    }
}
//工厂原型中设置创建所有类型数据对象的基类
Factory.prototype = {
    Java : function(content){

    },
    Php : function(content){

    },
    UI : function(content){
        
    },
    JavaScript : function(content){
        this.content = content;
        (function(){
            var div = document.createElement('div');
            div.innerHTML = content;
            div.style.background = 'pink';
            document.getElementById('container').appendChild(div);
        })(content);
    }
};
```

这样我们以后如果想添加其他类，只需写在Factory这个工厂类的原型里面就可以了。