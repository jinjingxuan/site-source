---
title: 日常-2020.3.30
date: 2020-03-30 09:52:01
categories: 日常
---

* 伪类和伪元素
* 变量提升的一道题
* 正则将手机号中间四位变为*
* 图片懒加载
* 二分查找
* 移动端字体如何配置

<!--more-->

## 1.伪类和伪元素

伪类：`:focus`,`:hover`以及`<a>`标签的`:link`、`visited`等，

伪元素：较常见的比如`:before`、`:after`等。 

**（1）伪类的功能**

1.获取不存在与DOM树中的信息 。比如： `<a>` 标签的`:link、:visited` 等。这些信息不存在于DOM树中。

2.获取 不能被常规CSS选择器获取到的信息。比如：要获取第一个子元素，我们无法用常规的CSS选择器获取，但可以通过 `:first-child` 来获取到。

>  **伪类其实是弥补了CSS选择器的不足，用来更方便地获取信息。** 

 **（2）伪元素的功能**

> **而伪元素本质上是创建了一个虚拟容器(元素)，我们可以在其中添加内容或样式。** 

**（3）冒号区别**

> 伪元素的由**两个冒号**`::`开头，然后是伪元素的名称。

> 使用两个冒号`::`是为了区别伪类和伪元素（CSS2中并没有区别）。当然，考虑到兼容性，CSS2中已存的伪元素仍然可以使用一个冒号`:`的语法，但是CSS3中新增的伪元素必须使用两个冒号`::`

 ```
div:after
div::after
div:first-child
div::first-child //错
 ```

## 2. 变量提升的一道题

```js
	   setTimeout(() => console.log('1', a));

        new Promise(resolve => resolve()).then(() => console.log('2', a));

        console.log('3', a);
        var a = '哈哈'
        console.log('4', a);
        function a() {};

//3,f
//4,哈哈
//2，哈哈
//1，哈哈
```

## 3.正则将手机号中间四位变为*

```js
function replacePhone(str){
    let reg = /^(\d{3})(\d{4})(\d{4})$/
   	return  str.replace(reg,'$1****$3')
}
```

## 4. 图片懒加载

一张图片就是一个<img>标签，而图片的来源主要是src属性。浏览器是否发起亲求就是根据是否有src属性决定的。

既然这样，那么我们就要对<img>标签的src属性下手了，在没进入可视区域的时候，我们先不给这个<img>标签赋src属性，这样岂不是浏览器就不会发送请求了。

```
document.documentElement.clientHeight//获取屏幕可视区域的高度
element.offsetTop//获取元素相对于文档顶部的高度
document.documentElement.scrollTop//获取浏览器窗口顶部与文档顶部之间的距离，也就是滚动条滚动的距离
```

![1](https://pic1.zhimg.com/80/v2-af1ab0c5f34e468e8647135c1f9f51e4_720w.jpg)

如果：offsetTop-scroolTop<clientHeight，则图片进入了可视区内，则被请求。 

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>图片懒加载</title>
    <style>
        img {
            display: block;
            width: 100%;
            height: 300px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <img data-src="./images/1.jpg" alt="">
    <img data-src="./images/2.jpg" alt="">
    <img data-src="./images/3.jpg" alt="">
    <img data-src="./images/4.jpg" alt="">
    <img data-src="./images/5.jpg" alt="">
    <img data-src="./images/6.jpg" alt="">
    <img data-src="./images/7.jpg" alt="">
    <img data-src="./images/8.jpg" alt="">
    <img data-src="./images/9.jpg" alt="">
    <img data-src="./images/10.jpg" alt="">
    <img data-src="./images/1.jpg" alt="">
    <img data-src="./images/2.jpg" alt="">
</body>
<script>
        var imgs = document.querySelectorAll('img');

        //offsetTop是元素与offsetParent的距离，循环获取直到页面顶部
        function getTop(e) {
            var T = e.offsetTop;
            while(e = e.offsetParent) {
                T += e.offsetTop;
            }
            return T;
        }

        function lazyLoad(imgs) {
            var H = document.documentElement.clientHeight;//获取可视区域高度
            var S = document.documentElement.scrollTop || document.body.scrollTop;
            for (var i = 0; i < imgs.length; i++) {
                if (H > getTop(imgs[i])-S) {
                    imgs[i].src = imgs[i].getAttribute('data-src');
                }
            }
        }

        window.onload = window.onscroll = function () { //onscroll()在滚动条滚动的时候触发
            lazyLoad(imgs);
        }
</script>
</html>
```

## 5. 二分查找

```js
function binary_search(arr, key) {
    var low = 0,
        high = arr.length - 1;

    while (low <= high) {
        var mid = parseInt((high + low) / 2);
        if (key == arr[mid]) {
            return mid;
        } else if (key > arr[mid]) {
            low = mid + 1;
        } else if (key < arr[mid]) {
            high = mid - 1;
        } else {
            return -1;
        }
    }
}
```

