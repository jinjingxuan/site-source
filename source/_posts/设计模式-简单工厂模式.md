---
title: 简单工厂模式
date: 2019-1-18 16:00:54
categories: 设计模式
---

简单工厂模式：又叫静态工厂方法，由一个工厂对象决定创建某一种产品对象类的实例。主要用来创建同一类对象。

# 关于登录模块的需求

当用户名的内容不符合规定，警示框警示一句'用户名不能多于16个字母或数字'

```js
var LoginAlert = function(text){
    this.content = text;
}
LoginAlert.prototype.show = function(){
    //显示警示框
}

var userNameAlert = new LoginAlert('用户名不能多于16个字母或数字');
userNameAlert.show();
```

<!--more-->

当密码不正确时，提示‘输入的密码不正确’

```js
//可以用上面写好的类
var passwordAlert = new LoginAlert('输入的密码不正确');
passwordAlert.show();
```

当用户不存在时，提醒‘您的用户名不存在，请重新输入’,并且在警示框中添加一个按钮

```js
//创建一个新的类
var LoginConfirm = function(text){
    this.content = text;
}
LoginConfirm.prototype.show = function(){
    //显示确认框
}

var loginFailConfirm = new LoginConfirm('您的用户名不存在，请重新输入');
loginFailConfirm.show();
```

登录后给出一个自定义提示框

```js
//再添加一个新类
var LoginPrompt = function(text){
    this.content = text;
}
LoginPrompt.prototype.show = function(){
    //显示提示框
}
```

# 简单工厂

以上写了LoginAlert，LoginConfirm，LoginPrompt三个类，我们可以将其封装在一个函数里，这样我只需要记住这个函数，然后通过这个函数就可以创建我需要的对象。

```js
var PopFactory = function(name){
    switch(name){
        case 'alert':
            return new LoginAlert();
        case 'confirm':
            return new LoginConfirm();
        case 'prompt':
            return new LoginPrompt();
    }
}
```

这三个类有很多地方是相同的，是可以抽象提取出来用的

```js
function creatPop(type,text){
    //创建一个对象，并对对象拓展属性和方法
    var o = new Object();
    o.content = text;
    o.show = function(){
        //显示方法
    }；
    if(type == 'alert'){
        //警示框差异部分
    }
    if(type == 'prompt'){
        //提示框差异部分
    }
    if(type == 'confirm'){
        //确认框差异部分
    }
    //将对象返回
    return o;
}
//创建警示框
var userNameAlert = createPop('alert','用户名只能是26个字母和数字')；
```

## 工厂模式：原料，加工，出厂

```js
//工厂模式
function createBook(name,time,type){
    var o = new Object(); //原料
    o.name = name;        //加工
    o.time = time;
    o.type = type;
    o.getName = function(){
        console.log(this.name);
    };
    //返回对象
    return o;             //出厂
}

//类似于构造函数，构造函数中只需把o.name改为this.name
```

