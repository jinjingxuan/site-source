---
title: 日常-2020.3.21
date: 2020-03-21 09:52:01
categories: 日常
---

* 口述一下什么是原型链
* 详细理解instanceof
* 一道面试题
* 数组扁平化带深度参数

<!--more-->

## 1.原型链

[原型链]：每个对象都有一个指向它的原型（prototype）对象的内部链接。这个原型对象又有自己的原型，直到某个对象的原型为 null 为止（也就是不再有原型指向），组成这条链的最后一环。这种一级一级的链结构就称为原型链（prototype chain）。

 ## 2. instanceof

> ```
> instanceof 运算符用来测试一个对象在其原型链中是否存在一个构造函数的 prototype 属性。
> A instanceof B
> //判断 B 的 prototype 属性指向的原型对象(B.prototype)是否在对象 A 的原型链上。
> ```

```js

function _instanceof(L, R) { //L为instanceof左表达式，R为右表达式
  let Ro = R.prototype //原型
  L = L.__proto__ //隐式原型
  while (true) {
    if (L === null) { //当到达L原型链顶端还未匹配，返回false
      return false
    }
    if (L === Ro) { //全等时，返回true
      return true
    }
    L = L.__proto__
  }
}

let num = 1
num.__proto__ === Number.prototype // true
num instanceof Number // false

num = new Number(1)
num.__proto__ === Number.prototype // true
num instanceof Number // true

num.__proto__ === (new Number(1)).__proto__ // true
```

 ## 3.一道面试题

 ```js
function ClassA()
{
    this.name = 'classA'
}
const classA = new ClassA ()
ClassA.prototype =
classA.__proto__ =
classA instanceof ClassA
 ```

-  		new 出来的实例 this 指向哪 	(新实例)
	  		怎么修改 new 出来的 this 的指向（return一个新对象） 		
	  		ClassA 的 prototype 是啥，有啥    
	  		classA 的 **proto** 是啥 	          （ClassA.prototype == classA.proto)
	  		原型链讲一下 	
	  		instanceof 什么时候返回 true，什么时候返回 false 	
	  		怎么让 classA instanceof ClassA 返回 false  (改变ClassA.prototype或classA.proto)

 ## 4. 数组扁平化带深度参数

```js
			function flattern(list,depth){
                let res = []
                for(let item of list){
                    if(Array.isArray(item)&&depth>0){
                        res.concat(flattern(item,depth-1))
                    }else{
                        res.push(item)
                    }
                }
                return res
            }

// 写一个函数，将传进去的数组按深度展开
list = [1,2,[3,4],[5,6,[7,8],9],10,11]
// depth 等于 1 时输出
//depth = 1 :[1,2,3,4,5,6,[7,8],9,10,11]
// depth 等于 2 时输出
//depth = 2 :[1,2,3,4,5,6,7,8,9,10,11]

console.log(flattern(list,1))
console.log(flattern(list,2))
```



 

 